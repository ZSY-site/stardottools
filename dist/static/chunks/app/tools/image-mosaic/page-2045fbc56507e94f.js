(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3627],{2215:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>c});var t=a(5155),l=a(2115),i=a(1693),r=a(9233);function c(){let{language:e}=(0,i.o)(),s=r.P9[e],[a,c]=(0,l.useState)(""),[d,n]=(0,l.useState)(""),[o,x]=(0,l.useState)(10),[m,h]=(0,l.useState)(50),[g,u]=(0,l.useState)(null),[b,p]=(0,l.useState)(!1),[j,f]=(0,l.useState)(!1),[N,v]=(0,l.useState)(""),y=(0,l.useRef)(null),M=(0,l.useRef)(null);return(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,t.jsxs)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,t.jsxs)("div",{className:"text-center mb-8",children:[(0,t.jsx)("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:s.imageMosaic?.title||"在线图片马赛克工具"}),(0,t.jsx)("p",{className:"text-lg text-gray-600 max-w-3xl mx-auto",children:s.imageMosaic?.description||"为图片添加马赛克效果，保护隐私信息，支持全图马赛克和局部区域马赛克"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,t.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[(0,t.jsx)("h2",{className:"text-2xl font-semibold text-gray-900 mb-6",children:s.imageMosaic?.inputTitle||"图片上传和设置"}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:s.imageMosaic?.uploadImage||"上传图片"}),(0,t.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center hover:border-blue-400 transition-colors",children:[(0,t.jsx)("input",{ref:M,type:"file",accept:"image/*",onChange:e=>{let a=e.target.files?.[0];if(!a)return;if(!a.type.startsWith("image/"))return void v(s.imageMosaic?.invalidFile||"请上传图片文件");if(a.size>0xa00000)return void v(s.imageMosaic?.fileTooLarge||"文件大小不能超过10MB");let t=new FileReader;t.onload=e=>{c(e.target?.result),n(""),u(null),v("")},t.readAsDataURL(a)},className:"hidden",id:"mosaic-file-input"}),(0,t.jsxs)("label",{htmlFor:"mosaic-file-input",className:"cursor-pointer",children:[(0,t.jsx)("div",{className:"text-6xl mb-4",children:"\uD83D\uDDBC️"}),(0,t.jsx)("p",{className:"text-lg font-medium text-gray-700 mb-2",children:s.imageMosaic?.clickToUpload||"点击选择图片文件"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:s.imageMosaic?.fileLimit||"支持 JPG, PNG, GIF, WebP 等格式，最大10MB"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:s.imageMosaic?.mosaicSettings||"马赛克设置"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-xs text-gray-500 mb-1",children:[s.imageMosaic?.blockSize||"马赛克块大小"," (",o,"px)"]}),(0,t.jsx)("input",{type:"range",min:"5",max:"50",value:o,onChange:e=>x(Number(e.target.value)),className:"w-full"}),(0,t.jsxs)("div",{className:"flex justify-between text-xs text-gray-500",children:[(0,t.jsx)("span",{children:"精细"}),(0,t.jsx)("span",{children:"粗糙"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-xs text-gray-500 mb-1",children:[s.imageMosaic?.intensity||"马赛克强度"," (",m,"%)"]}),(0,t.jsx)("input",{type:"range",min:"10",max:"100",value:m,onChange:e=>h(Number(e.target.value)),className:"w-full"}),(0,t.jsxs)("div",{className:"flex justify-between text-xs text-gray-500",children:[(0,t.jsx)("span",{children:"轻微"}),(0,t.jsx)("span",{children:"强烈"})]})]})]})]}),N&&(0,t.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:(0,t.jsx)("p",{className:"text-red-700 text-sm",children:N})}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,t.jsx)("button",{onClick:()=>{if(!a||!y.current)return void v(s.imageMosaic?.noImage||"请先上传图片");f(!0),v("");try{let e=y.current,s=e.getContext("2d");if(!s)throw Error("无法获取canvas上下文");let t=new Image;t.onload=()=>{e.width=t.width,e.height=t.height,s.drawImage(t,0,0);let a=s.getImageData(0,0,e.width,e.height),l=a.data,i=Math.max(1,o),r=m/100;for(let s=0;s<e.height;s+=i)for(let a=0;a<e.width;a+=i){let t=0,c=0,d=0,n=0;for(let r=0;r<i&&s+r<e.height;r++)for(let o=0;o<i&&a+o<e.width;o++){let i=((s+r)*e.width+(a+o))*4;t+=l[i],c+=l[i+1],d+=l[i+2],n++}if(n>0){t=Math.floor(t/n),c=Math.floor(c/n),d=Math.floor(d/n),t=Math.floor(t*r),c=Math.floor(c*r),d=Math.floor(d*r);for(let r=0;r<i&&s+r<e.height;r++)for(let n=0;n<i&&a+n<e.width;n++){let i=((s+r)*e.width+(a+n))*4;l[i]=t,l[i+1]=c,l[i+2]=d}}}s.putImageData(a,0,0);let c=e.toDataURL("image/jpeg",.9);n(c),f(!1)},t.src=a}catch(e){v(s.imageMosaic?.processingError||"处理失败"),f(!1)}},disabled:j||!a,className:"flex-1 bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 disabled:bg-blue-300 transition-colors",children:j?s.imageMosaic?.processing||"处理中...":s.imageMosaic?.applyFull||"全图马赛克"}),(0,t.jsx)("button",{onClick:()=>{if(!a||!g||!y.current)return void v(s.imageMosaic?.noSelection||"请先选择区域");f(!0),v("");try{let e=y.current,s=e.getContext("2d");if(!s)throw Error("无法获取canvas上下文");let t=new Image;t.onload=()=>{e.width=t.width,e.height=t.height,s.drawImage(t,0,0);let{x:a,y:l,width:i,height:r}=g,c=s.getImageData(a,l,i,r),d=c.data,x=Math.max(1,o),h=m/100;for(let e=0;e<r;e+=x)for(let s=0;s<i;s+=x){let a=0,t=0,l=0,c=0;for(let n=0;n<x&&e+n<r;n++)for(let r=0;r<x&&s+r<i;r++){let o=((e+n)*i+(s+r))*4;a+=d[o],t+=d[o+1],l+=d[o+2],c++}if(c>0){a=Math.floor(a/c),t=Math.floor(t/c),l=Math.floor(l/c),a=Math.floor(a*h),t=Math.floor(t*h),l=Math.floor(l*h);for(let c=0;c<x&&e+c<r;c++)for(let r=0;r<x&&s+r<i;r++){let n=((e+c)*i+(s+r))*4;d[n]=a,d[n+1]=t,d[n+2]=l}}}s.putImageData(c,a,l);let u=e.toDataURL("image/jpeg",.9);n(u),f(!1)},t.src=a}catch(e){v(s.imageMosaic?.processingError||"处理失败"),f(!1)}},disabled:j||!a||!g,className:"flex-1 bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 disabled:bg-green-300 transition-colors",children:s.imageMosaic?.applyArea||"局部马赛克"}),(0,t.jsx)("button",{onClick:()=>{c(""),n(""),u(null),v(""),M.current&&(M.current.value="")},className:"px-4 py-3 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:s.imageMosaic?.clear||"清空"})]})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[(0,t.jsx)("h2",{className:"text-2xl font-semibold text-gray-900 mb-6",children:s.imageMosaic?.outputTitle||"马赛克效果预览"}),a?(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:s.imageMosaic?.originalImage||"原图预览"}),(0,t.jsxs)("div",{className:"border border-gray-200 rounded-lg p-3 relative cursor-crosshair",onClick:e=>{if(!a)return;let s=e.currentTarget.getBoundingClientRect();u({x:Math.max(0,e.clientX-s.left-50),y:Math.max(0,e.clientY-s.top-50),width:100,height:100})},children:[(0,t.jsx)("img",{src:a,alt:"原图",className:"w-full max-h-64 object-contain rounded"}),g&&(0,t.jsx)("div",{className:"absolute border-2 border-red-500 bg-red-500 bg-opacity-20",style:{left:`${g.x}px`,top:`${g.y}px`,width:`${g.width}px`,height:`${g.height}px`},children:(0,t.jsx)("div",{className:"absolute -top-6 left-0 bg-red-500 text-white text-xs px-2 py-1 rounded",children:"选中区域"})})]}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:s.imageMosaic?.clickToSelect||"点击图片选择马赛克区域"})]}),d&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:s.imageMosaic?.mosaicResult||"马赛克效果"}),(0,t.jsx)("div",{className:"border border-gray-200 rounded-lg p-3",children:(0,t.jsx)("img",{src:d,alt:"马赛克效果",className:"w-full max-h-64 object-contain rounded"})}),(0,t.jsx)("div",{className:"flex gap-2 mt-3",children:(0,t.jsx)("button",{onClick:()=>{if(!d)return;let e=document.createElement("a");e.download="mosaic-image.jpg",e.href=d,e.click()},className:"flex-1 bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 transition-colors",children:s.imageMosaic?.download||"下载图片"})})]})]}):(0,t.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[(0,t.jsx)("div",{className:"text-6xl mb-4",children:"\uD83D\uDD0D"}),(0,t.jsx)("p",{children:s.imageMosaic?.noImage||"请上传图片开始处理"})]})]})]}),(0,t.jsx)("canvas",{ref:y,className:"hidden"}),(0,t.jsxs)("div",{className:"mt-12 bg-white rounded-2xl shadow-lg p-8",children:[(0,t.jsx)("h3",{className:"text-2xl font-semibold text-gray-900 mb-6",children:s.imageMosaic?.featuresTitle||"功能特性"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,t.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,t.jsx)("div",{className:"bg-purple-100 p-2 rounded-full",children:(0,t.jsx)("span",{className:"text-purple-600 text-lg",children:"\uD83C\uDFAF"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-semibold text-gray-900 mb-1",children:"精准区域选择"}),(0,t.jsx)("p",{className:"text-gray-600 text-sm",children:"支持点击选择特定区域进行马赛克处理"})]})]}),(0,t.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,t.jsx)("div",{className:"bg-green-100 p-2 rounded-full",children:(0,t.jsx)("span",{className:"text-green-600 text-lg",children:"⚙️"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-semibold text-gray-900 mb-1",children:"可调节参数"}),(0,t.jsx)("p",{className:"text-gray-600 text-sm",children:"马赛克块大小和强度均可自定义调节"})]})]}),(0,t.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,t.jsx)("div",{className:"bg-blue-100 p-2 rounded-full",children:(0,t.jsx)("span",{className:"text-blue-600 text-lg",children:"\uD83D\uDD12"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-semibold text-gray-900 mb-1",children:"隐私保护"}),(0,t.jsx)("p",{className:"text-gray-600 text-sm",children:"本地处理，图片数据不上传服务器"})]})]})]})]}),(0,t.jsxs)("div",{className:"mt-8 bg-blue-50 rounded-2xl p-6",children:[(0,t.jsx)("h3",{className:"text-xl font-semibold text-blue-900 mb-4",children:s.imageMosaic?.usageTitle||"使用说明"}),(0,t.jsxs)("ol",{className:"list-decimal list-inside space-y-2 text-blue-800",children:[(0,t.jsx)("li",{children:"上传需要处理的图片文件"}),(0,t.jsx)("li",{children:"调整马赛克块大小和强度参数"}),(0,t.jsx)("li",{children:"选择处理方式：全图马赛克或局部马赛克"}),(0,t.jsx)("li",{children:"如需局部马赛克，点击图片选择区域"}),(0,t.jsx)("li",{children:"点击相应按钮应用马赛克效果"}),(0,t.jsx)("li",{children:"下载处理后的图片"})]})]})]})})}},8677:(e,s,a)=>{Promise.resolve().then(a.bind(a,2215))}},e=>{e.O(0,[1693,8441,3794,7358],()=>e(e.s=8677)),_N_E=e.O()}]);